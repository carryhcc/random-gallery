# éšæœºå›¾åº“ (Random Gallery)

ä¸€ä¸ªåŸºäº Spring Boot çš„éšæœºå›¾ç‰‡å±•ç¤ºåº”ç”¨ï¼Œæ”¯æŒå¤šç¯å¢ƒåˆ‡æ¢ã€åˆ†ç»„ç®¡ç†å’Œå›¾ç‰‡æµè§ˆåŠŸèƒ½ã€‚

## ğŸŒŸ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- **éšæœºå›¾ç‰‡å±•ç¤º** - è·å–éšæœºå•å¼ å›¾ç‰‡
- **éšæœºå¥—å›¾æµè§ˆ** - è·å–éšæœºå¥—å›¾é›†åˆ
- **åˆ†ç»„ç®¡ç†** - æ”¯æŒå›¾ç‰‡åˆ†ç»„æŸ¥è¯¢å’Œç®¡ç†
- **åˆ†é¡µæµè§ˆ** - æ”¯æŒåˆ†é¡µåŠ è½½ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
- **å¤šç¯å¢ƒæ”¯æŒ** - æ”¯æŒå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒåˆ‡æ¢

### æŠ€æœ¯ç‰¹æ€§
- **ç°ä»£åŒ–UI** - å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒæ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯
- **ç¯å¢ƒåˆ‡æ¢** - è¿è¡Œæ—¶åŠ¨æ€åˆ‡æ¢æ•°æ®åº“ç¯å¢ƒ
- **ç¼“å­˜ä¼˜åŒ–** - å†…ç½®ç¼“å­˜æœºåˆ¶ï¼Œæå‡è®¿é—®æ€§èƒ½
- **Dockeræ”¯æŒ** - å®Œæ•´çš„å®¹å™¨åŒ–éƒ¨ç½²æ–¹æ¡ˆ
- **RESTful API** - æ ‡å‡†åŒ–çš„APIæ¥å£è®¾è®¡

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Java 17+
- Maven 3.6+
- MySQL 5.7+
- Docker (å¯é€‰)

### æœ¬åœ°å¼€å‘

1. **å…‹éš†é¡¹ç›®**
```bash
git clone <repository-url>
cd random-gallery
```

2. **é…ç½®æ•°æ®åº“**
ç¼–è¾‘ `src/main/resources/db.yaml` æ–‡ä»¶ï¼š
```yaml
db:
  host: localhost
  port: 3306
  name: your_database
  username: your_username
  password: your_password
```

3. **è¿è¡Œåº”ç”¨**
```bash
mvn spring-boot:run
```

åº”ç”¨å°†åœ¨ `http://localhost:8086` å¯åŠ¨

### Docker éƒ¨ç½²

#### æ–¹å¼ä¸€ï¼šä½¿ç”¨æ„å»ºè„šæœ¬ï¼ˆæ¨èï¼‰
```bash
# ä¸€é”®æ„å»ºå’Œå¯¼å‡º
./build-and-export.sh
```

#### æ–¹å¼äºŒï¼šæ‰‹åŠ¨æ„å»º
```bash
# 1. Mavenæ‰“åŒ…
mvn clean package -DskipTests

# 2. æ„å»ºDockeré•œåƒ
docker build -t helloworld:latest .

# 3. è¿è¡Œå®¹å™¨
docker run -p 8086:8086 helloworld:latest
```

#### è‡ªå®šä¹‰æ•°æ®åº“é…ç½®
```bash
docker run -p 8086:8086 \
  -e DB_HOST=your_host \
  -e DB_USERNAME=your_user \
  -e DB_PASSWORD=your_pass \
  helloworld:latest
```

## ğŸ“– API æ–‡æ¡£

### å›¾ç‰‡ç›¸å…³æ¥å£

| æ¥å£ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/api/pic/random` | GET | è·å–éšæœºå•å¼ å›¾ç‰‡ |
| `/api/pic/group` | GET | è·å–éšæœºå¥—å›¾ |
| `/api/pic/group/paged` | GET | åˆ†é¡µè·å–å¥—å›¾ |

### åˆ†ç»„ç®¡ç†æ¥å£

| æ¥å£ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/api/group/list` | POST | æŸ¥è¯¢åˆ†ç»„åˆ—è¡¨ |
| `/api/group/count` | POST | æŸ¥è¯¢åˆ†ç»„æ€»æ•° |
| `/api/group/list/paged` | POST | åˆ†é¡µæŸ¥è¯¢åˆ†ç»„åˆ—è¡¨ |

### ç³»ç»Ÿç®¡ç†æ¥å£

| æ¥å£ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/api/system/env/current` | GET | è·å–å½“å‰ç¯å¢ƒ |
| `/api/system/env/dev` | GET | åˆ‡æ¢åˆ°å¼€å‘ç¯å¢ƒ |
| `/api/system/env/test` | GET | åˆ‡æ¢åˆ°æµ‹è¯•ç¯å¢ƒ |
| `/api/system/env/prod` | GET | åˆ‡æ¢åˆ°ç”Ÿäº§ç¯å¢ƒ |

### é¡µé¢è·¯ç”±

| è·¯ç”± | æè¿° |
|------|------|
| `/` | é¦–é¡µ |
| `/showPic` | éšæœºå›¾ç‰‡é¡µé¢ |
| `/showPicList` | å›¾ç‰‡åˆ—è¡¨é¡µé¢ |
| `/groupList` | åˆ†ç»„åˆ—è¡¨é¡µé¢ |

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ main/
â”‚   â”œâ”€â”€ java/com/example/randomGallery/
â”‚   â”‚   â”œâ”€â”€ controller/          # æ§åˆ¶å™¨å±‚
â”‚   â”‚   â”œâ”€â”€ entity/             # å®ä½“ç±»
â”‚   â”‚   â”œâ”€â”€ server/             # æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ utils/              # å·¥å…·ç±»
â”‚   â”‚   â””â”€â”€ config/             # é…ç½®ç±»
â”‚   â””â”€â”€ resources/
â”‚       â”œâ”€â”€ static/             # é™æ€èµ„æº
â”‚       â”œâ”€â”€ templates/          # æ¨¡æ¿æ–‡ä»¶
â”‚       â””â”€â”€ mapper/             # MyBatisæ˜ å°„æ–‡ä»¶
â””â”€â”€ test/                       # æµ‹è¯•ä»£ç 
```

## âš™ï¸ é…ç½®è¯´æ˜

### åº”ç”¨é…ç½® (`application.yml`)
```yaml
server:
  port: 8086

spring:
  application:
    name: random-gallery
  datasource:
    url: jdbc:mysql://${db.host}:${db.port}/${db.name}?useUnicode=true&characterEncoding=utf8&serverTimezone=UTC&allowPublicKeyRetrieval=true&useSSL=false
    username: ${db.username}
    password: ${db.password}
    driver-class-name: com.mysql.cj.jdbc.Driver
```

### æ•°æ®åº“é…ç½® (`db.yaml`)
```yaml
db:
  host: 111.111.111.111
  port: 3306
  name: test
  username: root
  password: root
```

## ğŸ”§ å¼€å‘æŒ‡å—

### ç¯å¢ƒåˆ‡æ¢åŠŸèƒ½
åº”ç”¨æ”¯æŒè¿è¡Œæ—¶åŠ¨æ€åˆ‡æ¢æ•°æ®åº“ç¯å¢ƒï¼š
- é€šè¿‡Webç•Œé¢å³ä¸Šè§’çš„ç¯å¢ƒåˆ‡æ¢å™¨
- é€šè¿‡APIæ¥å£ `/api/system/env/{env}`

### ç¼“å­˜æœºåˆ¶
- å†…ç½® `CacheService` æä¾›ç¼“å­˜åŠŸèƒ½
- æ”¯æŒéšæœºIDå’Œåˆ†ç»„IDçš„ç¼“å­˜
- å®šæ—¶å™¨æœºåˆ¶è‡ªåŠ¨åˆ·æ–°ç¼“å­˜

### æ•°æ®åº“è®¾è®¡
åº”ç”¨ä½¿ç”¨MySQLæ•°æ®åº“ï¼Œä¸»è¦è¡¨ç»“æ„ï¼š
- å›¾ç‰‡ä¿¡æ¯è¡¨ï¼šå­˜å‚¨å›¾ç‰‡URLå’ŒåŸºæœ¬ä¿¡æ¯
- åˆ†ç»„è¡¨ï¼šå­˜å‚¨å›¾ç‰‡åˆ†ç»„ä¿¡æ¯
- æ”¯æŒå¤šç¯å¢ƒæ•°æ®åº“é…ç½®

## ğŸ“¦ éƒ¨ç½²è¯´æ˜

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
1. ç¡®ä¿æ•°æ®åº“è¿æ¥é…ç½®æ­£ç¡®
2. ä½¿ç”¨æ„å»ºè„šæœ¬ç”ŸæˆDockeré•œåƒ
3. é…ç½®ç¯å¢ƒå˜é‡è¿›è¡Œæ•°æ®åº“è¿æ¥
4. ä½¿ç”¨åå‘ä»£ç†ï¼ˆå¦‚Nginxï¼‰è¿›è¡Œè´Ÿè½½å‡è¡¡

### ç›‘æ§å’Œæ—¥å¿—
- åº”ç”¨æ—¥å¿—è¾“å‡ºåˆ° `logs/app.log`
- æ”¯æŒä¸åŒçº§åˆ«çš„æ—¥å¿—é…ç½®
- å»ºè®®é…ç½®æ—¥å¿—è½®è½¬å’Œç›‘æ§å‘Šè­¦

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- æäº¤ Issue
- å‘é€é‚®ä»¶
- é¡¹ç›®è®¨è®ºåŒº

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™å®ƒä¸€ä¸ªæ˜Ÿæ ‡ï¼